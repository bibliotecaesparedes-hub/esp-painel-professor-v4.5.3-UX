<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ESP.EE ¬∑ Painel Professor</title>

  <!-- CSS -->
  ./style.css

  <!-- Depend√™ncias (DEVEM vir antes do app.js) -->
  <!-- SweetAlert2 -->
  https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js</script>
  <!-- SheetJS (XLSX) -->
  https://cdn.jsdelivr.net/npm/xlsx@0.20.2/dist/xlsx.full.min.js</script>
  <!-- jsPDF + autotable -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/distn.js</script>
  https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js</script>
  <!-- MSAL (msal-browser) -->
  https://alcdn.msauth.net/browser/2.38.0/js/msal-browser.min.js</script>

  <!-- A SUA l√≥gica deve ser o √öLTIMO script -->
  ./app.js</script>
</head>
<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="brand">ESP.EE v4.5.3‚ÄëUX</div>
    <div class="top-actions">
      <span id="sessNome" class="session-pill">Sess√£o: n√£o iniciada</span>
      <span id="syncIndicator" class="muted">‚Äî</span>
      <button id="btnMsLogin"  class="btn">Entrar</button>
      <button id="btnMsLogout" class="btn hidden">Sair</button>
    </div>
  </div>

  <div class="content stack gap">
    <!-- HOJE -->
    <section id="secHoje" class="section">
      <div class="sec-head">
        <h2>üìÖ Hoje</h2>
        <div class="sec-actions">
          <input id="dataHoje" type="date" class="input">
          <button id="btnRefreshDay" class="btn">Recarregar</button>
          <button id="btnCriarOficina" class="btn">Nova oficina</button>
        </div>
      </div>
      <div id="sessoesHoje"></div>
    </section>

    <!-- REGISTOS -->
    <section id="secRegistos" class="section">
      <div class="sec-head">
        <h2>üìò Registos</h2>
        <div class="sec-actions">
          <input id="fltIni" type="date" class="input" placeholder="De">
          <input id="fltFim" type="date" class="input" placeholder="At√©">
          <button id="btnFiltrar" class="btn">Filtrar</button>
          <button id="btnPdfSemana" class="btn">PDF semanal</button>
          <button id="btnXlsxSemana" class="btn">XLSX semanal</button>
          <button id="btnPdfAluno" class="btn">PDF por aluno</button>
          <button id="btnXlsxAluno" class="btn">XLSX por aluno</button>
          <!-- Novos bot√µes (por disciplina / professor autenticado) -->
          <button id="btnPdfDisciplina" class="btn">PDF por disciplina</button>
          <button id="btnXlsxDisciplina" class="btn">XLSX por disciplina</button>
        </div>
      </div>
      <div id="regList"></div>
    </section>

    <!-- ADMINISTRA√á√ÉO -->
    <section id="admin" class="section hidden">
      <div class="sec-head">
        <h2>üë• Administra√ß√£o</h2>
        <div class="sec-actions">
          <select id="adminEntity" class="input" title="Entidade">
            <option value="professores">Professores</option>
            <option value="alunos">Alunos</option>
            <option value="disciplinas">Disciplinas</option>
            <option value="oficinas">Oficinas (Hor√°rios)</option>
          </select>
          <input id="adminSearch" class="input" placeholder="Pesquisar..." title="Pesquisar na grelha">
          <button id="btnAdminNovo" class="btn">Novo</button>
          <button id="btnAdminEditar" class="btn" disabled>Editar</button>
          <button id="btnAdminApagar" class="btn" disabled>Apagar</button>
          <button id="btnAdminExportLista" class="btn">Exportar lista (XLSX)</button>
          <button id="btnAdminExportRegistos" class="btn">Exportar registos (PDF/XLSX)</button>
        </div>
      </div>

      <div id="adminGrid" class="section" style="padding:0">
        <!-- Tabela renderizada por JS -->
      </div>

      <div class="sec-head">
        <h3>Ferramentas</h3>
        <div class="sec-actions">
          <input id="fileImport" type="file" class="input" accept=".xlsx,.json" multiple>
          <button id="btnBackupNow" class="btn">Backup agora</button>
          <button id="btnExportCfgJson" class="btn">Exportar Config (JSON)</button>
          <button id="btnExportRegJson" class="btn">Exportar Registos (JSON)</button>
          <button id="btnExportCfgXlsx" class="btn">Exportar Config (XLSX)</button>
          <button id="btnExportRegXlsx" class="btn">Exportar Registos (XLSX)</button>
          <button id="btnRestoreBackup" class="btn">Restaurar Backup</button>
        </div>
      </div>
    </section>

    <!-- CONFIG / PREFER√äNCIAS -->
    <section class="section">
      <h2>‚öôÔ∏è Configura√ß√µes</h2>
      <div class="muted">Prefer√™ncias e backups.</div>
    </section>
  </div>
</body>
</html>